 <!doctype html><title>Welcome to the maze. Arrow keys move.</title>
 <style>      
  body, html {overflow: hidden}
  span#win {
    background-color: red;
  }
  span#active {
    background-color: blue;
  }
</style>

<pre id=maze></pre>
<script>
var cursorcol = 0;
var cursorrow = 0;

var getcur = function(col, row) {
  return document.querySelector('span.col' + col + '.row' + row);
}

var move = function(dcol, drow) {
  var destcol = cursorcol + dcol;
  var destrow = cursorrow + drow;

  var dest = getcur(destcol, destrow);
  if(!dest || dest.textContent != 0) {
    console.log("nope");
    return;
  }
  if(dest.id == "win") alert("cool");
  cursorcol = destcol;
  cursorrow = destrow;
  document.getElementById('active').id="";
  getcur(cursorcol, cursorrow).id='active';
};
var down = function() {
  console.log('down');
  move(0, 1);
  return false;
};

var up = function() {
  console.log('up');
  move(0, -1);
  return false;
};
var right = function() {
  console.log('right');
  move(1, 0);
};
var left = function() {
  console.log('left');
  move(-1, 0);
};

document.body.onkeypress = function(event) {
  switch(event.keyCode) {
  case 37: //left
    left(); return false;
  case 38: //up
    up(); return false;
  case 39: //right
    right(); return false;
  case 40: //down
    down(); return false;
  }
}

var req = new XMLHttpRequest();
req.open('GET', '#', false);
req.send();
if(req.status != 200) { alert('sad'); }
var maze = document.getElementById('maze');

var col = 0; var row = 0;
var thisdiv = document.createElement('div');
for(var i = 0; i < req.responseText.length; i++) { var c = req.responseText[i];
if(c == '\n') { col = 0; row++; maze.appendChild(thisdiv); thisdiv =
document.createElement('div'); } else { var it = document.createElement('span')
it.textContent = c; it.className="col" + col + " row" + row;
thisdiv.appendChild(it); col++; } }
document.querySelector('span.col0.row0').id="active"; console.log(row+","+col)
document.querySelector('span.col0.row'+row-2).id="win";
</script>
